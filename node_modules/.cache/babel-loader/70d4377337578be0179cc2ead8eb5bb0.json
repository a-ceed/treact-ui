{"ast":null,"code":"'use strict';\n\nimport _slicedToArray from \"C:/git/treact-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport throttle from 'lodash.throttle';\n\nvar useInView = function useInView() {\n  var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      ref = _useState2[0],\n      setRef = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inView = _useState4[0],\n      setInView = _useState4[1];\n\n  useEffect(function () {\n    var elementYPos = function elementYPos() {\n      return ref.getBoundingClientRect().top + window.pageYOffset - window.innerHeight + offset;\n    };\n\n    if (!ref) {\n      return;\n    }\n\n    var handleScroll = throttle(function () {\n      if (!ref) {\n        return;\n      }\n\n      if (window.pageYOffset >= elementYPos()) {\n        window.removeEventListener('scroll', handleScroll);\n        setInView(true);\n      }\n    }, 200);\n    window.addEventListener('scroll', handleScroll, {\n      passive: true\n    });\n    handleScroll();\n    return function () {\n      return window.removeEventListener('scroll', handleScroll);\n    };\n  }, [ref, offset]);\n  return [setRef, inView];\n};\n\nexport default useInView;","map":{"version":3,"sources":["C:/git/treact-ui/node_modules/@owaiswiz/use-in-view/index.js"],"names":["useEffect","useState","throttle","useInView","offset","ref","setRef","inView","setInView","elementYPos","getBoundingClientRect","top","window","pageYOffset","innerHeight","handleScroll","removeEventListener","addEventListener","passive"],"mappings":"AAAA;;;AACA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,OAAOC,QAAP,MAAqB,iBAArB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAgB;AAAA,MAAfC,MAAe,uEAAN,CAAM;;AACjC,kBAAsBH,QAAQ,CAAC,IAAD,CAA9B;AAAA;AAAA,MAAOI,GAAP;AAAA,MAAYC,MAAZ;;AACA,mBAA4BL,QAAQ,CAAC,KAAD,CAApC;AAAA;AAAA,MAAOM,MAAP;AAAA,MAAeC,SAAf;;AACAR,EAAAA,SAAS,CAAC,YAAM;AACf,QAAMS,WAAW,GAAG,SAAdA,WAAc,GAAM;AACzB,aACCJ,GAAG,CAACK,qBAAJ,GAA4BC,GAA5B,GACAC,MAAM,CAACC,WADP,GAEAD,MAAM,CAACE,WAFP,GAGAV,MAJD;AAMA,KAPD;;AASA,QAAI,CAACC,GAAL,EAAU;AACT;AACA;;AAED,QAAMU,YAAY,GAAGb,QAAQ,CAAC,YAAM;AACnC,UAAI,CAACG,GAAL,EAAU;AACT;AACA;;AAED,UAAIO,MAAM,CAACC,WAAP,IAAsBJ,WAAW,EAArC,EAAyC;AACxCG,QAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC;AACAP,QAAAA,SAAS,CAAC,IAAD,CAAT;AACA;AACD,KAT4B,EAS1B,GAT0B,CAA7B;AAUAI,IAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkCF,YAAlC,EAAgD;AAACG,MAAAA,OAAO,EAAE;AAAV,KAAhD;AACAH,IAAAA,YAAY;AAEZ,WAAO;AAAA,aAAMH,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC,CAAN;AAAA,KAAP;AACA,GA5BQ,EA4BN,CAACV,GAAD,EAAMD,MAAN,CA5BM,CAAT;AA8BA,SAAO,CAACE,MAAD,EAASC,MAAT,CAAP;AACA,CAlCD;;AAoCA,eAAeJ,SAAf","sourcesContent":["'use strict';\r\nimport {useEffect, useState} from 'react';\r\nimport throttle from 'lodash.throttle';\r\n\r\nconst useInView = (offset = 0) => {\r\n\tconst [ref, setRef] = useState(null);\r\n\tconst [inView, setInView] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tconst elementYPos = () => {\r\n\t\t\treturn (\r\n\t\t\t\tref.getBoundingClientRect().top +\r\n\t\t\t\twindow.pageYOffset -\r\n\t\t\t\twindow.innerHeight +\r\n\t\t\t\toffset\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tif (!ref) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst handleScroll = throttle(() => {\r\n\t\t\tif (!ref) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (window.pageYOffset >= elementYPos()) {\r\n\t\t\t\twindow.removeEventListener('scroll', handleScroll);\r\n\t\t\t\tsetInView(true);\r\n\t\t\t}\r\n\t\t}, 200);\r\n\t\twindow.addEventListener('scroll', handleScroll, {passive: true});\r\n\t\thandleScroll();\r\n\r\n\t\treturn () => window.removeEventListener('scroll', handleScroll);\r\n\t}, [ref, offset]);\r\n\r\n\treturn [setRef, inView];\r\n};\r\n\r\nexport default useInView;\r\n"]},"metadata":{},"sourceType":"module"}